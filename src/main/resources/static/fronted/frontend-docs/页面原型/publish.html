<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发布信息 - 广西民族大学失物招领系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="bg-gray-50">
    <!-- 顶部导航栏 -->
    <nav class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-blue-600">
                            <i class="fas fa-search mr-2"></i>
                            广西民族大学失物招领
                        </h1>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <a href="#"
                            class="text-gray-500 hover:text-gray-700 px-1 pt-1 pb-4 text-sm font-medium">浏览失物</a>
                        <a href="#"
                            class="text-blue-600 border-b-2 border-blue-600 px-1 pt-1 pb-4 text-sm font-medium">发布信息</a>
                        <a href="#"
                            class="text-gray-500 hover:text-gray-700 px-1 pt-1 pb-4 text-sm font-medium">个人中心</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <img class="h-8 w-8 rounded-full"
                            src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face"
                            alt="用户头像">
                        <span class="text-sm text-gray-700">张同学</span>
                        <i class="fas fa-chevron-down text-gray-400"></i>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- 页面标题 -->
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">发布失物信息</h2>
            <p class="text-gray-600">帮助他人找回失物，传递校园温暖</p>
        </div>

        <!-- 发布类型选择 -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
                <i class="fas fa-clipboard-list mr-2 text-blue-500"></i>
                选择发布类型
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="border-2 border-blue-500 bg-blue-50 rounded-lg p-4 cursor-pointer" id="foundType">
                    <div class="flex items-center justify-center mb-3">
                        <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-hand-holding text-white text-xl"></i>
                        </div>
                    </div>
                    <h4 class="text-center font-semibold text-blue-700 mb-2">失物招领</h4>
                    <p class="text-center text-sm text-blue-600">我捡到了物品，寻找失主</p>
                </div>
                <div class="border-2 border-gray-300 rounded-lg p-4 cursor-pointer hover:border-orange-500 hover:bg-orange-50"
                    id="lostType">
                    <div class="flex items-center justify-center mb-3">
                        <div class="w-12 h-12 bg-gray-400 rounded-full flex items-center justify-center">
                            <i class="fas fa-search text-white text-xl"></i>
                        </div>
                    </div>
                    <h4 class="text-center font-semibold text-gray-700 mb-2">寻物启事</h4>
                    <p class="text-center text-sm text-gray-600">我丢失了物品，寻求帮助</p>
                </div>
            </div>
        </div>

        <!-- 发布表单 -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <form id="publishForm">
                <!-- 基本信息 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-info-circle mr-2 text-blue-500"></i>
                        基本信息
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="itemName" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-tag mr-2 text-blue-500"></i>
                                物品名称 *
                            </label>
                            <input type="text" id="itemName" name="itemName" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="请输入物品名称">
                        </div>
                        <div>
                            <label for="category" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-list mr-2 text-blue-500"></i>
                                物品分类 *
                            </label>
                            <select id="category" name="category" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">请选择物品分类</option>
                                <option value="electronics">电子产品</option>
                                <option value="stationery">文具用品</option>
                                <option value="clothing">服饰配件</option>
                                <option value="documents">证件卡类</option>
                                <option value="books">书籍资料</option>
                                <option value="sports">体育用品</option>
                                <option value="others">其他物品</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 物品描述 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-edit mr-2 text-blue-500"></i>
                        物品描述
                    </h3>
                    <div class="space-y-6">
                        <div>
                            <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-align-left mr-2 text-blue-500"></i>
                                详细描述 *
                            </label>
                            <textarea id="description" name="description" rows="4" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="请详细描述物品的外观特征、品牌型号、颜色等信息，有助于失主确认"></textarea>
                        </div>

                        <!-- 物品特征 -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="color" class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-palette mr-2 text-blue-500"></i>
                                    主要颜色
                                </label>
                                <div class="flex flex-wrap gap-2">
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-red-500 border-2 border-gray-300 hover:border-blue-500"
                                        data-color="红色"></button>
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-blue-500 border-2 border-gray-300 hover:border-blue-500"
                                        data-color="蓝色"></button>
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-green-500 border-2 border-gray-300 hover:border-blue-500"
                                        data-color="绿色"></button>
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-yellow-500 border-2 border-gray-300 hover:border-blue-500"
                                        data-color="黄色"></button>
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-purple-500 border-2 border-gray-300 hover:border-blue-500"
                                        data-color="紫色"></button>
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-black border-2 border-gray-300 hover:border-blue-500"
                                        data-color="黑色"></button>
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-white border-2 border-gray-300 hover:border-blue-500"
                                        data-color="白色"></button>
                                    <button type="button"
                                        class="color-btn w-8 h-8 rounded-full bg-gray-500 border-2 border-gray-300 hover:border-blue-500"
                                        data-color="灰色"></button>
                                </div>
                                <input type="hidden" id="selectedColor" name="color">
                            </div>
                            <div>
                                <label for="brand" class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-copyright mr-2 text-blue-500"></i>
                                    品牌型号
                                </label>
                                <input type="text" id="brand" name="brand"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    placeholder="如：苹果iPhone14">
                            </div>
                            <div>
                                <label for="size" class="block text-sm font-medium text-gray-700 mb-2">
                                    <i class="fas fa-ruler mr-2 text-blue-500"></i>
                                    大小尺寸
                                </label>
                                <select id="size" name="size"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">请选择大小</option>
                                    <option value="small">小型（手机、钱包等）</option>
                                    <option value="medium">中型（书包、衣物等）</option>
                                    <option value="large">大型（行李箱等）</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 地点和时间信息 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-map-marker-alt mr-2 text-blue-500"></i>
                        地点和时间信息
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="location" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-building mr-2 text-blue-500"></i>
                                <span id="locationLabel">捡到地点</span> *
                            </label>
                            <select id="location" name="location" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">请选择地点</option>
                                <option value="wenke">文科楼</option>
                                <option value="like">理科楼</option>
                                <option value="library">图书馆</option>
                                <option value="dormitory">学生宿舍</option>
                                <option value="canteen">学生食堂</option>
                                <option value="gym">体育馆</option>
                                <option value="admin">行政楼</option>
                                <option value="lab">实验楼</option>
                                <option value="other">其他地点</option>
                            </select>
                        </div>
                        <div>
                            <label for="detailLocation" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-map-pin mr-2 text-blue-500"></i>
                                具体位置
                            </label>
                            <input type="text" id="detailLocation" name="detailLocation"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="如：3楼301教室门口">
                        </div>
                        <div>
                            <label for="foundDate" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-calendar mr-2 text-blue-500"></i>
                                <span id="dateLabel">捡到日期</span> *
                            </label>
                            <input type="date" id="foundDate" name="foundDate" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label for="foundTime" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-clock mr-2 text-blue-500"></i>
                                <span id="timeLabel">捡到时间</span>
                            </label>
                            <input type="time" id="foundTime" name="foundTime"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- 图片上传 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-camera mr-2 text-blue-500"></i>
                        物品图片
                    </h3>
                    <div
                        class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors">
                        <div class="space-y-4">
                            <div class="mx-auto w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-cloud-upload-alt text-gray-400 text-xl"></i>
                            </div>
                            <div>
                                <p class="text-gray-600">点击上传或拖拽图片到此处</p>
                                <p class="text-sm text-gray-500">支持 JPG、PNG 格式，最多上传3张图片</p>
                            </div>
                            <input type="file" id="images" name="images" multiple accept="image/*" class="hidden">
                            <button type="button" onclick="document.getElementById('images').click()"
                                class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                <i class="fas fa-plus mr-2"></i>
                                选择图片
                            </button>
                        </div>
                    </div>
                    <div id="imagePreview" class="mt-4 grid grid-cols-3 gap-4 hidden"></div>
                </div>

                <!-- 联系方式 -->
                <div class="mb-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-phone mr-2 text-blue-500"></i>
                        联系方式
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="contactPhone" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-mobile-alt mr-2 text-blue-500"></i>
                                联系电话 *
                            </label>
                            <input type="tel" id="contactPhone" name="contactPhone" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="请输入联系电话">
                        </div>
                        <div>
                            <label for="contactWechat" class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fab fa-weixin mr-2 text-green-500"></i>
                                微信号
                            </label>
                            <input type="text" id="contactWechat" name="contactWechat"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                placeholder="请输入微信号（可选）">
                        </div>
                    </div>
                    <div class="mt-4">
                        <div class="flex items-center">
                            <input id="hideContact" name="hideContact" type="checkbox"
                                class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="hideContact" class="ml-2 block text-sm text-gray-700">
                                隐藏联系方式（仅管理员可见，通过系统转发联系）
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 提交按钮 -->
                <div class="flex justify-center space-x-4">
                    <button type="button"
                        class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                        <i class="fas fa-times mr-2"></i>
                        取消
                    </button>
                    <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        <i class="fas fa-paper-plane mr-2"></i>
                        <span id="submitText">发布失物招领</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const foundType = document.getElementById('foundType');
            const lostType = document.getElementById('lostType');
            const locationLabel = document.getElementById('locationLabel');
            const dateLabel = document.getElementById('dateLabel');
            const timeLabel = document.getElementById('timeLabel');
            const submitText = document.getElementById('submitText');
            let currentType = 'found';

            // 发布类型切换
            foundType.addEventListener('click', function () {
                currentType = 'found';
                foundType.className = 'border-2 border-blue-500 bg-blue-50 rounded-lg p-4 cursor-pointer';
                lostType.className = 'border-2 border-gray-300 rounded-lg p-4 cursor-pointer hover:border-orange-500 hover:bg-orange-50';

                // 更新图标颜色
                foundType.querySelector('.w-12').className = 'w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center';
                lostType.querySelector('.w-12').className = 'w-12 h-12 bg-gray-400 rounded-full flex items-center justify-center';

                // 更新标签文本
                locationLabel.textContent = '捡到地点';
                dateLabel.textContent = '捡到日期';
                timeLabel.textContent = '捡到时间';
                submitText.textContent = '发布失物招领';
            });

            lostType.addEventListener('click', function () {
                currentType = 'lost';
                lostType.className = 'border-2 border-orange-500 bg-orange-50 rounded-lg p-4 cursor-pointer';
                foundType.className = 'border-2 border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-500 hover:bg-blue-50';

                // 更新图标颜色
                lostType.querySelector('.w-12').className = 'w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center';
                foundType.querySelector('.w-12').className = 'w-12 h-12 bg-gray-400 rounded-full flex items-center justify-center';

                // 更新标签文本
                locationLabel.textContent = '丢失地点';
                dateLabel.textContent = '丢失日期';
                timeLabel.textContent = '丢失时间';
                submitText.textContent = '发布寻物启事';
            });

            // 颜色选择
            const colorButtons = document.querySelectorAll('.color-btn');
            const selectedColorInput = document.getElementById('selectedColor');

            colorButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // 移除其他颜色的选中状态
                    colorButtons.forEach(btn => {
                        btn.className = btn.className.replace('border-blue-500', 'border-gray-300');
                    });
                    // 选中当前颜色
                    this.className = this.className.replace('border-gray-300', 'border-blue-500');
                    selectedColorInput.value = this.dataset.color;
                });
            });

            // 图片上传预览
            const imagesInput = document.getElementById('images');
            const imagePreview = document.getElementById('imagePreview');

            imagesInput.addEventListener('change', function () {
                const files = this.files;
                imagePreview.innerHTML = '';

                if (files.length > 0) {
                    imagePreview.classList.remove('hidden');

                    for (let i = 0; i < Math.min(files.length, 3); i++) {
                        const file = files[i];
                        const reader = new FileReader();

                        reader.onload = function (e) {
                            const div = document.createElement('div');
                            div.className = 'relative';
                            div.innerHTML = `
                                <img src="${e.target.result}" alt="预览图片" class="w-full h-24 object-cover rounded-lg">
                                <button type="button" class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600" onclick="this.parentElement.remove()">
                                    <i class="fas fa-times"></i>
                                </button>
                            `;
                            imagePreview.appendChild(div);
                        };

                        reader.readAsDataURL(file);
                    }
                } else {
                    imagePreview.classList.add('hidden');
                }
            });

            // 设置默认日期为今天
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('foundDate').value = today;

            // 表单提交
            document.getElementById('publishForm').addEventListener('submit', function (e) {
                e.preventDefault();

                const formData = new FormData(this);
                const type = currentType === 'found' ? '失物招领' : '寻物启事';

                alert(`${type}信息发布成功！\n感谢您的善举，我们会尽快帮助物品找到主人。`);

                // 重置表单
                this.reset();
                imagePreview.innerHTML = '';
                imagePreview.classList.add('hidden');
                selectedColorInput.value = '';

                // 重置颜色选择
                colorButtons.forEach(btn => {
                    btn.className = btn.className.replace('border-blue-500', 'border-gray-300');
                });
            });
        });
    </script>
</body>

</html>